{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "file-input-button",
  "type": "registry:component",
  "title": "File Input Button",
  "description": "A button that opens a file input when clicked.",
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "registry/joyco/blocks/file-input-button.tsx",
      "content": "import { Button } from \"@/components/ui/button\"\nimport { useCallback, useId, useMemo } from \"react\"\n\ninterface FileInputProps {\n  onUpload: (file: File) => Promise<unknown> | void\n  inputProps?: React.InputHTMLAttributes<HTMLInputElement>\n}\n\ninterface FileInputReturn {\n  handleClick: () => void\n  input: React.ReactNode\n}\n\nexport const useFileInput = ({ onUpload, inputProps = {} }: FileInputProps): FileInputReturn => {\n  const id = useId()\n\n  const handleClick = useCallback(() => {\n    const fileInput = document.getElementById(`${id}-hidden-file-input`) as HTMLInputElement\n    fileInput?.click()\n  }, [id])\n\n  const handleFileChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      const files = event.target.files\n      if (files && files.length > 0) {\n        Array.from(files).forEach((file) => {\n          onUpload(file)\n        })\n      }\n    },\n    [onUpload]\n  )\n\n  return useMemo(\n    () => ({\n      handleClick,\n      input: (\n        <input\n          type=\"file\"\n          id={`${id}-hidden-file-input`}\n          style={{ width: 0, height: 0, opacity: 0, position: \"absolute\", pointerEvents: \"none\" }}\n          onChange={handleFileChange}\n          {...inputProps}\n        />\n      ),\n    }),\n    [handleClick, handleFileChange, id, inputProps]\n  )\n}\n\nexport const FileInputButton = (props: FileInputProps & React.ComponentProps<typeof Button>) => {\n  const { inputProps, onUpload, children, ...buttonProps } = props\n  const { handleClick, input } = useFileInput({ onUpload, inputProps })\n\n  return (\n    <Button onClick={handleClick} {...buttonProps}>\n      {input}\n      {children}\n    </Button>\n  )\n}",
      "type": "registry:component"
    }
  ]
}